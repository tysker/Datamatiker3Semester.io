[HOME](../index.md)

## Exercises - HTTP


**1) Monitoring HTTP Headers 1**

Create a new NetBeans Maven Web-project.
For this exercise we will just use the default index.html generated by NetBeans.
Press the run button. When the file is shown in the browser (Chrome), open the network tab in the developer window Ctrl-shift-j) and press F5

Observe and explain each of the values monitored (use view source to see the plain messages).
Hints: In order to better observe the values related to Caching you might need to:

* Go back to NetBeans and rename your file to index1.html
* Go back to your browser and (while the developer window is open) change the url to point to the new file.
Observe the values

Press F5 and observe the values again.

**Answer**

_When loading my domain name, I can see that it went successfully by looking at the status code: 2xx._

___


**2) Monitoring HTTP Headers**

* Add an image to the page
* Add an external style sheet to the page: (<link rel="stylesheet" type="text/css" href="myStyle.css">)
Reload the page again, observe the request(s) being made, and explain the purpose of the Connection: header.

**Answer**

_When adding an image to the page, I can see there is a separate call for the image. The "Connection" header = Keep-Alive, indicates that the session is active_

____


**3) Monitoring HTTP Headers (Response-codes 3xx)**

In the Web-project, created for 1+2, add a new HTML-page called r.html and add this text in an h1-tag “You got redirected to me”.

Use the Wizard to create a servlet called redirect

Remove the processRequest and the doPost method completely from the generated servlet-code.

In the doGet(..) method replace the call to processRequest() with this line: response.sendRedirect("r.html");

While your server is running, open a (Chrome) browser, and in this, open Chrome Developer Tools and the network tab.

Enter the address for the servlet (http:localhost:8084/HttpExcercise/redirect) into the browser and explain:

**Answer**

Copying in: response.sendRedirect("r.html"); into the doGet method for the servlet, will redirect the end-user to r.html. When a server redirects someone, it will be shown with a 3xx status code
 _1. redirect: Status Code: 302 Found = The HTTP response status code 302 Found is a common way of performing URL redirection._
 _2. r.html: Status Code: 200 OK (from disk cache)
 
* How the browser knew where to go in the second request
       
       @Override
       protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.sendRedirect("r.html");
    }

____


**3a) Redirecting to https instead of http**

In Google Chrome enter this address (with the developer window + the network-tab open), and exactly as it is spelled):

http://studypoints.dk:

Explain the first two request monitored (notice where you requested to go, and where you actually ended).

Important: Later this week, you will learn how to setup your own server to use https, and ONLY https.

**Answer**

_Even though you try to browse http://studypoints.dk it will redirect you to use https, as this site only allows https communication due to certificates being used._

____


**4a) Status Codes (5xx)**

Use the Wizard to create a servlet called ups In the processRequest(..) method, just before the try-statement add this code: int result = 100/0;

While your server is running, open Chrome developer tools and the network tab and call the servlet.

Write down the response code generated by the server as for the previous exercises.

**Answer**

_Status codes for the previous excersices have been 200 and 3xx._
_HTTP Status 500 Internal Server Error._
_The server failed to fulfil the request._ 

____


**4b) Status Codes (4xx)**

While your server is running, open open Chrome developer tools and the network tab, and call this address: http://localhost:8080/i_dont_exist

Write down the response code generated by the server as for the previous exercises.

**Answer**

_HTTP Status 404 Not Found_
_The HTTP 404, 404 Not Found, and 404 error message is a Hypertext Transfer Protocol (HTTP) standard response code, in computer network communications, to indicate that the client was able to communicate with a given server, but the server could not find what was requested._

___


**4c) Status Codes - Ranges**

Your document, containing the Status Codes for all the exercises done so far, should now contain codes like 2xx, 3xx, 4xx and 5xx.

Explain (write down your answer so you won’t forget) the meaning of the first digit in the 3-digit Status Codes you have seen so far.

**Answer**

_Status code 3xx stands for redirection_

1. 300 - multiple choices
2. 301 - resource moved permanently
3. 302 - resource moved temporarily
4. 303 - see another resource
5. 304 - resource not modified
6. 305 - Use proxy
7. 307 - temporary edirection
8. 306 & 308 codes
* https://www.webnots.com/3xx-http-status-codes/

* 1xx Informational response
* 2xx Success
* 3xx Redirection
* 4xx Client errors
* 5xx Server errors
* https://en.wikipedia.org/wiki/List_of_HTTP_status_codes

___


**5) Get HTTP Request Headers on the Server**

We have seen that a HTTP request from a Browser typically includes a lot of headers with information related to the client.
This information is available to a servlet (is available to any web-server technology) via the request object. Create a Servlet, which should output this information in a table as sketched in this figure (or in any way you like, but don’t focus on presentation).

Hints: Use the request objects getHeaderXXX methods.

 
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
        
        Enumeration<String> header = request.getHeaderNames();
        
        while(header.hasMoreElements()){
            String h = header.nextElement();
            System.out.println(h + " ---- " + request.getHeader(h));
        }
    }
    
* host ---- localhost:8084
* connection ---- keep-alive
* upgrade-insecure-requests ---- 1
* user-agent ---- Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36
* dnt ---- 1
* accept ---- text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
* accept-encoding ---- gzip, deflate, br
* accept-language ---- da,de-DE;q=0.9,de;q=0.8,en-US;q=0.7,en;q=0.6,la;q=0.5

___


**6) Get/Post-parameters**

Create a new html-file in the web-project made in exercise 1.

Add a form to the file, including two text input boxes and a submit button as sketched below:

Add an extra input field to the form with type=”hidden”, name=”hidden” and ` value=12345678`.

Add the value # for the forms action attribute.

Set the forms method-attribute to the value “GET” (actually the default value) and test the form. Observe what happens in your browser’s address field.

Change the forms method-attribute to the value “POST” and test the form. Observe the change in your browsers address field. Figure out (using Chrome Developer Tools), how parameters are passed in, for a POST request.

Write down your observations

**Answer**

_method="POST" = The URL looks like that = http://localhost:8084/HttpExercise/input.html. In the POST method we are not able to see the values in the URL, what makes that method a lot more secure._

_method="GET" = The URL looks like that = http://localhost:8084/HttpExercise/input.html?hidden=12345678. The GET method shows the value in the URL._

___

## Session and Cookies

For the next two exercises/demos you should create a new web-project. Both the demos uses a Servlet.

**7) Sessions (Session Cookies)**

In your web project use the wizard to generate a new Servlet

a) Enter SessionDemo as the name of the Servlet and servlets as package name

b) Right click the file and select Run to see “what is does”

c) Change the generated processRequest(..) method as sketched below.

      protected void processRequest(HttpServletRequest request, 
                              HttpServletResponse response)
          throws ServletException, IOException {
    String name = request.getParameter("name");
    if (name != null) {
      request.getSession().setAttribute("name", name);
    } else {
      name = (String) request.getSession().getAttribute("name");
    }
    response.setContentType("text/html;charset=UTF-8");
    try (PrintWriter out = response.getWriter()) {
      out.println("<!DOCTYPE html>");
      out.println("<html>");
      out.println("<head>");
      out.println("<title>Servlet SessionDemo</title>");
      out.println("</head>");
      out.println("<body>");
      if (name != null) {
        name = (String)request.getSession().getAttribute("name");
        out.println("<p> Welcome " + name  + " !</p>");
      } else {
        out.println("<h2>Please enter your name, and submit</h2>");
        out.println("<form action='SessionDemo'>");
        out.println("<input type='input' name='name'>");
        out.println("<input type='submit'></form>");
      }
      out.println("</body>");
      out.println("</html>");
    }
  }

a) Enter your name and press submit, copy the URL in the browser into your clipboard, close the tab (but not the browser) and load the page again in a new tab using the URL in the clipboard.

b) Now close your browser (you could even close your laptop, but don’t ;-) , open it again and load the page again using the URL in the clipboard

c) While doing the things in step e, you should monitor the content of your local cookies and the HTTP requests being sent, using the development tools in Chrome.

d) Most import part of this exercise: Explain (on paper) how Cookies can be used to maintain “state” on the client between subsequent calls to a server, even when a browser has been closed down.

Write down your observations!


